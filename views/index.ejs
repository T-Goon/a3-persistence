<!DOCTYPE html>
<html lang='en'>

<head>
  <%- include('common/header'); %>

    <!-- <link rel='stylesheet' href='/stylesheets/style.css' /> -->
</head>

<body>
  <%- include('common/navbar'); %>

    <div class="container">
      <h1 id="display-1">TODO List</h1>
      <p class="lead">
        Add tasks to a TODO list. All task titles must be
        unique. The priority of each task must be 0 - 10
        where a higher number means a higher priority.
        You can edit tasks but they must be done one at a time.
        Deadlines for each task are auto-generated by the
        server based on the priority. Tasks are sorted in the
        table by priority in descending order.
      </p>
      <div class="row">
        <h2 class="h2">Tasks</h3>
          <table class="table table-striped table-hover">
            <thead class="table-dark">
              <tr>
                <th>Task Title</th>
                <th>Description</th>
                <th>Priority</th>
                <th>Date Created</th>
                <th>Deadline</th>
                <!-- Col Holds buttons, Intentionally empty -->
                <th></th>
              </tr>
            </thead>
            <tbody id="task-holder">
              <% for(let i=0;i<tasks.length; i++) {%>

                <tr>
                  <td>
                    <label class="d-inline" for="<%= `title-${i}` %>" aria-label="Task Title Input"></label>
                    <input class='form-control' id=<%=`title-${i}` %> type="text" value=<%= tasks[i].title %>>
                  </td>
                  <td>
                    <label class="d-inline" for="<%= `description-${i}` %>" aria-label="Task Description Input"></label>
                    <input class='form-control' id=<%=`description-${i}` %> type="text" value=<%= tasks[i].description %>
                      >
                  </td>
                  <td>
                    <label class="d-inline" for="<%= `priority-${i}` %>" aria-label="Task Priority Input"></label>
                    <input class='form-control' type="number" id=<%=`priority-${i}` %> min="0" max="10" value=<%=
                      tasks[i].priority %>>
                  </td>
                  <td>
                    <label class="d-inline" for="<%= `dateCreated-${i}` %>" aria-label="Task Date Created"></label>
                    <input class='form-control' id=<%=`dateCreated-${i}` %> type="text" value='<%= tasks[i].dateCreated
                      %>'
                      readonly>
                  </td>
                  <td>
                    <label class="d-inline" for="<%= `deadline-${i}` %>" aria-label="Task Deadline"></label>
                    <input class='form-control' id=<%=`deadline-${i}` %> type="text" value='<%= tasks[i].deadline %>'
                      readonly>
                  </td>
                  <td>
                    <div class="btn-group">
                      <button onclick="editTask('<%= i %>','<%= tasks[i].title %>')" class="btn btn-warning">Save
                        Edits</button>
                      <button onclick="delTask('<%= tasks[i].title %>')" class="btn btn-danger">Delete</button>
                    </div>
                  </td>
                </tr>
                <% } %>
            </tbody>
          </table>
      </div>

      <form class="border border-dark border-3 rounded rounded-5 p-3">
        <h3 class="h3">Add a Task</h3>
        <label for="title" class="form-label">Title:</label>
        <input class='form-control' type='text' name='title' id='title' placeholder="title" required>
        <label for="description" class="form-label">Description(optional):</label>
        <input class='form-control' type="text" name="description" id="description" placeholder="description">
        <label for="priority" class="form-label">Priority:</label>
        <input class='form-control' type="number" id="priority" name="priority" min="0" max="10" value='5' required>
        <button id="addTask-btn" class="btn btn-primary btn-lg">Submit</button>
      </form>
    </div>

    <script src="/javascripts/scripts.js"></script>
</body>

</html>