<!DOCTYPE html>
<html lang='en'>

<head>
  <%- include('common/header'); %>

  <link rel='stylesheet' href='/stylesheets/style.css' />
</head>

<body>
  <%- include('common/navbar'); %>

    <div class="container">
      <h1 id="page-title">TODO List</h1>
      <p class="instructions">
        Add tasks to a TODO list. All task titles must be
        unique. The priority of each task must be 0 - 10
        where a higher number means a higher priority.
        You can edit tasks but they must be done one at a time.
        Deadlines for each task are auto-generated by the
        server based on the priority. Tasks are sorted in the
        table by priority in descending order.
      </p>
      <div class="table-holder">
        <h2 class="table-title">Tasks</h3>
          <table class="task-table">
            <thead>
              <tr>
                <th>Task Title</th>
                <th>Description</th>
                <th>Priority</th>
                <th>Date Created</th>
                <th>Deadline</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="task-holder">
              <% for(let i=0;i<tasks.length; i++) {%>

                <tr>
                  <td>
                    <label for="<%= `title-${i}` %>" aria-label="Task Title Input"></label>
                    <input class='table-input' id=<%=`title-${i}` %> type="text" value=<%= tasks[i].title %>>
                  </td>
                  <td>
                    <label for="<%= `description-${i}` %>" aria-label="Task Description Input"></label>
                    <input class='table-input' id=<%=`description-${i}` %> type="text" value=<%= tasks[i].description %>
                      >
                  </td>
                  <td>
                    <label for="<%= `priority-${i}` %>" aria-label="Task Priority Input"></label>
                    <input class="table-input" type="number" id=<%=`priority-${i}` %> min="0" max="10" value=<%=
                      tasks[i].priority %>>
                  </td>
                  <td>
                    <label for="<%= `dateCreated-${i}` %>" aria-label="Task Date Created"></label>
                    <input class='table-input' id=<%=`dateCreated-${i}` %> type="text" value='<%= tasks[i].dateCreated %>'
                      readonly>
                  </td>
                  <td>
                    <label for="<%= `deadline-${i}` %>" aria-label="Task Deadline"></label>
                    <input class='table-input' id=<%=`deadline-${i}` %> type="text" value='<%= tasks[i].deadline %>'
                      readonly>
                  </td>
                  <td>
                    <button onclick="editTask('<%= i %>','<%= tasks[i].title %>')" class="secondary-btn">Save
                      Edits</button>
                    <button onclick="delTask('<%= tasks[i].title %>')" class="warn-btn">Delete</button>
                  </td>
                </tr>
                <% } %>
            </tbody>
          </table>
      </div>

      <form class="add-task-form">
        <h3 class="form-title">Add a Task</h3>
        <label for="title">Title:</label>
        <input type='text' name='title' id='title' placeholder="title" required>
        <label for="description">Description(optional):</label>
        <input type="text" name="description" id="description" placeholder="description">
        <label for="priority">Priority:</label>
        <input type="number" id="priority" name="priority" min="0" max="10" value='5' required>
        <button id="addTask-btn" class="primary-btn">Submit</button>
      </form>
    </div>

    <script src="/javascripts/scripts.js"></script>
</body>

</html>